# Отчёт об исправлении CI/CD проблем

## Проблемы

### 1. Устаревшая опция `swcMinify`

**Ошибка**: `Invalid next.config.ts options detected: Unrecognized key(s) in object: 'swcMinify'`

**Причина**: В Next.js 15 опция `swcMinify` больше не нужна, так как SWC минификация включена по умолчанию.

**Решение**: Удалена опция `swcMinify` из `next.config.ts`.

### 2. Отсутствующий модуль `critters`

**Ошибка**: `Cannot find module 'critters'`

**Причина**: Экспериментальная опция `optimizeCss: true` требует модуль `critters` для оптимизации CSS, который не установлен.

**Решение**: Отключена экспериментальная опция `optimizeCss` из конфигурации.

### 3. Ошибка пререндеринга 404 страницы

**Ошибка**: `Error occurred prerendering page "/404"`

**Причина**: Next.js пытается пререндерить 404 страницу, но кастомная страница не существует.

**Решение**: Создана кастомная 404 страница `src/app/not-found.tsx` для App Router.

## Изменения

### next.config.ts

```diff
- swcMinify: true,
- experimental: {
-     optimizeCss: true,
- },
```

### src/app/not-found.tsx

Создан новый файл с кастомной 404 страницей.

## Результат

✅ Сборка проходит успешно
✅ Все тесты проходят
✅ Линтер не выдаёт ошибок
✅ CI/CD готов к работе

## Проверка

```bash
npm run build  # ✅ Успешно
npm test       # ✅ Все тесты проходят
npm run lint   # ✅ Нет ошибок
```

## Рекомендации

1. **Не использовать экспериментальные опции** в продакшене без тщательного тестирования
2. **Регулярно обновлять конфигурацию** при обновлении Next.js
3. **Создавать кастомные страницы ошибок** для лучшего UX
4. **Тестировать сборку локально** перед пушем в репозиторий
